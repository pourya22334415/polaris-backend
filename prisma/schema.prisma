datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int       @id @default(autoincrement())
  username  String    @unique
  password  String
  role      Role      @default(USER)
  measurements Measurement[]
  testDefs   TestDefinition[]
}

enum Role {
  USER
  ADMIN
}

model Config {
  id               Int @id @default(autoincrement())
  intervalMinutes  Int
  thresholdSignal  Int
  thresholdDownload Int
  thresholdUpload  Int
  thresholdPing    Int
}

model Measurement {
  id             Int      @id @default(autoincrement())
  user           User     @relation(fields: [userId], references: [id])
  userId         Int
  timestamp      BigInt
  n              Int
  s              Int
  t              Int
  band           Int
  ulArfcn        Int
  dlArfcn        Int
  code           Int
  ulBw           Float
  dlBw           Float
  plmnId         Int
  tacOrLac       Int
  rac            Int
  longCellId     Int
  siteId         Int
  cellId         Int
  latitude       Float
  longitude      Float
  signalStrength Int
  networkType    String
  downloadSpeed  Float
  uploadSpeed    Float
  pingTime       Int
}

model TestDefinition {
  id        Int      @id @default(autoincrement())
  name      String
  tests     Json
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
